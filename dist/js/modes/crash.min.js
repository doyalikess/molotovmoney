var startingPrice,currentItem,nextItem,crashBox=document.querySelector(".crash__box"),crashTop=document.querySelector(".crash__top"),crashBottom=document.querySelector(".crash__bottom"),crashBg=document.querySelector(".crash__bg"),multiplier=document.querySelector("#multi"),startBtn=document.querySelector("#start"),withdrawBtn=document.querySelector("#withdraw"),amountOfWin=document.querySelector("#amount"),nameOfItem=document.querySelector(".crash__item-name"),colorOfItem=document.querySelector(".crash__item-color"),itemsBox=document.querySelector(".profile__items-box"),userItemsPagePrevious=document.querySelector(".upgrader__list-btn--left"),userItemsPageNext=document.querySelector(".upgrader__list-btn--right"),currentPageText=document.querySelector("#page-current"),totalPageText=document.querySelector("#page-total"),noItemsText=document.querySelector(".noitems-text"),currentPage=1,itemsPerPage=14,multiplierAmount=1,isItemChanging=!1,crashGoing=!1,choosedItem=!1,didWithdraw=!1,pickedItemId="",addCreateBet=function(){crashTop.innerHTML="",crashBottom.innerHTML="",crashBox.classList.value="",crashBox.classList.add("crash__box");var e=document.createElement("img"),t=document.createElement("img"),r=(e.classList.add("crash__img","crash__img--main"),t.classList.add("crash__img","crash__img--next","add-next-item"),crashBox.classList.add(items["id".concat(currentItem)].color+"-crash-box"),colorOfItem.classList.value="",nameOfItem.textContent=items["id".concat(currentItem)].name,colorOfItem.classList.add(items["id".concat(currentItem)].color+"-crash","crash__item-color"),items["id".concat(currentItem)].price);for(nextItem=void 0,i=0;i<countItemsAmount1;i++)if(sortedItems["id".concat(i)].price>r){nextItem=sortedItems["id".concat(i)].id;break}e.setAttribute("src","."+items["id".concat(currentItem)].imgDist),e.setAttribute("alt",items["id".concat(currentItem)].name),crashTop.append(e),void 0!==nextItem?(t.setAttribute("src","."+items["id".concat(nextItem)].imgDist),t.setAttribute("alt",items["id".concat(nextItem)].name),crashBottom.append(t)):crashBottom.innerHTML=""},setMultiplier=function(){multiplier.textContent=parseFloat(multiplierAmount).toFixed(2);var e,t=parseFloat((startingPrice*multiplierAmount).toFixed(2));didWithdraw||void 0!==nextItem&&t>items["id".concat(nextItem)].price&&!isItemChanging&&(isItemChanging=!0,currentItem=nextItem,currentPrice=items["id".concat(currentItem)].price,t=document.querySelector(".crash__img--main"),(e=document.querySelector(".crash__img--next")).classList.remove("add-next-item"),t.classList.add("hide-main-item"),e.classList.add("show-next-item"),setTimeout(function(){addCreateBet(),isItemChanging=!1},250))},startCrash=function(){amountOfWin.textContent=(startingPrice*multiplierAmount).toFixed(2),crashGoing=!0,multiplierAmount=1,addCreateBet();function e(){multiplierAmount+=.01,amountOfWin.textContent=(startingPrice*multiplierAmount).toFixed(2),setMultiplier(),i<=multiplierAmount?(clearInterval(a),endGame()):(clearInterval(a),r=Math.max(50,200/Math.sqrt(multiplierAmount)),a=setInterval(e,r))}var t,r=200,i=(t=Math.pow(Math.random(),-1.25),Math.max(1.01,t)),a=setInterval(e,r)},endGame=function(){crashBg.classList.remove("hidden"),withdrawBtn.classList.add("hidden"),startBtn.classList.remove("hidden"),colorOfItem.classList.value="",nameOfItem.textContent="",crashBg.textContent="Crashed at: "+parseFloat(multiplierAmount).toFixed(2)+"x",choosedItem=crashGoing=!1},resetCrash=function(){crashBg.classList.add("hidden"),withdrawBtn.classList.add("hidden"),startBtn.classList.remove("hidden"),didWithdraw=!1};function addPlayerBet(){withdrawBtn.classList.remove("hidden"),startBtn.classList.add("hidden"),currentItem=items["id".concat(pickedItemId)].id,startingPrice=items["id".concat(currentItem)].price;var e=localStorage.getItem("id".concat(pickedItemId))-1;localStorage.setItem("id".concat(pickedItemId),parseInt(e)),pickedItemId="",itemsBox.innerHTML="",addAllUserItems(),setItemsOrder(),renderItems()}var withdrawFromCrash=function(){didWithdraw=!0,withdrawBtn.classList.add("hidden"),crashBottom.firstElementChild&&crashBottom.firstElementChild.remove(),null===localStorage.getItem("id".concat(currentItem))||isNaN(localStorage.getItem("id".concat(currentItem)))?localStorage.setItem("id".concat(currentItem),1):(e=parseInt(localStorage.getItem("id".concat(currentItem)))+1,localStorage.setItem("id".concat(currentItem),e));var e=startingPrice*multiplierAmount-items["id".concat(currentItem)].price+parseFloat(localStorage.getItem("Balance")),e=(localStorage.setItem("Balance",parseFloat(e).toFixed(2)+"$"),parseInt(localStorage.getItem("crashWon"))+1);localStorage.setItem("crashWon",e),itemsBox.innerHTML="",addAllUserItems(),setItemsOrder(),renderItems(),setBalance()},addAllUserItems=function(){for(i=0;i<countItemsAmount1;i++){var e=parseInt(localStorage.getItem("id".concat(i)))||0;for(j=0;j<e;j++){var t=document.createElement("div"),r=document.createElement("img"),a=document.createElement("p"),c=document.createElement("p"),n=document.createElement("p");t.classList.add("profile__item","can-hover"),t.classList.add(items["id".concat(i)].color+"-drop2"),r.classList.add("profile__item-img"),a.classList.add("profile__item-name"),c.classList.add("profile__item-skin"),c.classList.add(items["id".concat(i)].color+"-text"),n.classList.add("profile__item-price"),t.id=items["id".concat(i)].id,r.setAttribute("src","."+items["id".concat(i)].imgDist),r.setAttribute("alt",items["id".concat(i)].name),a.textContent=items["id".concat(i)].weapon,c.textContent=items["id".concat(i)].skin,n.textContent=items["id".concat(i)].price+"$",t.append(r,a,c,n),itemsBox.append(t)}}document.querySelectorAll(".profile__item").forEach(function(e){e.addEventListener("click",chooseItem)})};function chooseItem(){!1===choosedItem?(this.classList.toggle("active-item-jackpot"),choosedItem=!0,pickedItemId=this.id):!0===choosedItem&&this.classList.contains("active-item-jackpot")&&(this.classList.toggle("active-item-jackpot"),choosedItem=!1,pickedItemId="")}var renderItems=function(){var e=document.querySelectorAll(".profile__item"),e=Array.from(e),t=(currentPage-1)*itemsPerPage,r=t+itemsPerPage,t=(e.forEach(function(e){return e.style.display="none"}),e.slice(t,r).forEach(function(e){e.style.display="flex"}),Math.ceil(e.length/itemsPerPage));currentPageText.textContent=currentPage,(totalPageText.textContent=t)<1?(currentPageText.textContent=0,currentPageText.parentElement.classList.add("hidden"),noItemsText.classList.remove("hidden")):(currentPageText.parentElement.classList.remove("hidden"),noItemsText.classList.add("hidden")),userItemsPagePrevious.style.display=1===currentPage?"none":"block",currentPage===t?userItemsPageNext.style.display="none":0<e.length&&(userItemsPageNext.style.display="block")},changePage=function(e){var t=document.querySelectorAll(".profile__item").length,t=Math.ceil(t/itemsPerPage);-1===e&&1<currentPage?currentPage--:1===e&&currentPage<t&&currentPage++,renderItems()},setItemsOrder=function(){var e=document.querySelectorAll(".profile__item"),e=Array.from(e);e.sort(function(e,t){return parseFloat(e.children[3].textContent)-parseFloat(t.children[3].textContent)}),e.forEach(function(e){itemsBox.appendChild(e)})},addListeners=function(){startBtn.addEventListener("click",function(){!1===crashGoing&&""!==pickedItemId&&(resetCrash(),addPlayerBet(),startCrash())}),document.querySelectorAll(".profile__item").forEach(function(e){e.addEventListener("click",chooseItem)}),withdrawBtn.addEventListener("click",withdrawFromCrash)};addAllUserItems(),setItemsOrder(),renderItems(),addListeners();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGVzL2NyYXNoLmpzIl0sIm5hbWVzIjpbInN0YXJ0aW5nUHJpY2UiLCJjdXJyZW50SXRlbSIsIm5leHRJdGVtIiwiY3Jhc2hCb3giLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjcmFzaFRvcCIsImNyYXNoQm90dG9tIiwiY3Jhc2hCZyIsIm11bHRpcGxpZXIiLCJzdGFydEJ0biIsIndpdGhkcmF3QnRuIiwiYW1vdW50T2ZXaW4iLCJuYW1lT2ZJdGVtIiwiY29sb3JPZkl0ZW0iLCJ1c2VySXRlbXNQYWdlTmV4dCIsImN1cnJlbnRQYWdlVGV4dCIsInRvdGFsUGFnZVRleHQiLCJub0l0ZW1zVGV4dCIsImN1cnJlbnRQYWdlIiwiaXRlbXNQZXJQYWdlIiwibXVsdGlwbGllckFtb3VudCIsImlzSXRlbUNoYW5naW5nIiwiY3Jhc2hHb2luZyIsImNob29zZWRJdGVtIiwiZGlkV2l0aGRyYXciLCJwaWNrZWRJdGVtSWQiLCJhZGRDcmVhdGVCZXQiLCJpbm5lckhUTUwiLCJjbGFzc0xpc3QiLCJ2YWx1ZSIsImFkZCIsImltZ0JvdHRvbSIsImNyZWF0ZUVsZW1lbnQiLCJjdXJyZW50SXRlbVByaWNlIiwiaXRlbXMiLCJ0ZXh0Q29udGVudCIsImNvbmNhdCIsIm5hbWUiLCJ1bmRlZmluZWQiLCJjb2xvciIsInByaWNlIiwiaSIsImNvdW50SXRlbXNBbW91bnQxIiwic2V0QXR0cmlidXRlIiwic29ydGVkSXRlbXMiLCJhcHBlbmQiLCJpbWdUb3AiLCJpbWdEaXN0IiwibXVsdGlwbGllZFByaWNlIiwicGFyc2VGbG9hdCIsImN1cnJlbnRQcmljZSIsInRvRml4ZWQiLCJpbWdOZXh0IiwicmVtb3ZlIiwic2V0VGltZW91dCIsInN0YXJ0Q3Jhc2giLCJpbnRlcnZhbFRpbWUiLCJnZW5lcmF0ZVJhbmRvbUNyYXNoTXVsdGlwbGllciIsImxhbWJkYSIsImNyYXNoQXRNdWx0aXBsaWVyIiwiaW5jcmVhc2VNdWx0aXBsaWVyIiwic2V0TXVsdGlwbGllciIsInNldEludGVydmFsIiwiY3Jhc2hJbnRlcnZhbCIsIm1heCIsImNsZWFySW50ZXJ2YWwiLCJNYXRoIiwic3FydCIsInJhbmRvbU11bHRpcGxpZXIiLCJwb3ciLCJyYW5kb20iLCJuZXdJdGVtQW1vdW50IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImFkZEFsbFVzZXJJdGVtcyIsInNldEl0ZW1zT3JkZXIiLCJyZW5kZXJJdGVtcyIsIndpdGhkcmF3RnJvbUNyYXNoIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJnZXRJdGVtIiwiYWRkUGxheWVyQmV0IiwibW9uZXlUb0FkZCIsImNyYXNoVG9BZGQiLCJwYXJzZUludCIsIml0ZW1zQm94IiwiaXRlbUNvdW50IiwiaXRlbUJveCIsIml0ZW1JbWciLCJpdGVtTmFtZSIsIml0ZW1Ta2luIiwiaWQiLCJpdGVtVG9BZGQiLCJpdGVtUHJpY2UiLCJhbGxJdGVtc09mUGxheWVyIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpdGVtIiwiY2hvb3NlSXRlbSIsInNldEJhbGFuY2UiLCJ0b2dnbGUiLCJhbGxJdGVtc09mVXNlciIsImFsbEl0ZW1zT2ZVc2VyQXJyYXkiLCJBcnJheSIsInVzZXJTdGFydEluZGV4IiwidXNlckVuZEluZGV4IiwiZGlzcGxheSIsInNsaWNlIiwic3R5bGUiLCJhbGxVc2VySXRlbXNQYWdlcyIsImNlaWwiLCJza2luIiwidXNlckl0ZW1zUGFnZVByZXZpb3VzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRoaXMiLCJhbGxJdGVtc09mVXNlckNvdW50IiwidXNlckl0ZW1zIiwidXNlckl0ZW1zQXJyYXkiLCJjaGlsZHJlbiIsImxlbmd0aCIsImFkZExpc3RlbmVycyIsInBhcmVudEVsZW1lbnQiLCJjaGFuZ2VQYWdlIiwiZGlyZWN0aW9uIiwidG90YWxVc2VyUGFnZXMiLCJmcm9tIiwic29ydCIsImEiLCJiIiwiYXBwZW5kQ2hpbGQiLCJyZXNldENyYXNoIl0sIm1hcHBpbmdzIjoiQUFBQSxJQXFCSUEsY0FDQUMsWUFDQUMsU0F2QkVDLFNBQVVD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bkIsSUFBTVIsRUFDTC9HLFNBQVMyRixpQkFBaUIsZ0JBQWdCLEVBQUV3QixPQUN2Q0ssRUFBaUJ6RCxLQUFLMkMsS0FBS0ssRUFBc0IvRixZQUFZLEVBRWpELENBQUMsSUFBZnVHLEdBQWtDLEVBQWR4RyxZQUV2QkEsV0FBVyxHQUNhLElBQWR3RyxHQUFtQnhHLFlBQWN5RyxHQUMzQ3pHLFdBQVcsR0FHWjBELFlBQVksQ0FDYixFQUVNRCxjQUFnQixXQUVyQixJQUFNd0MsRUFBWWhILFNBQVMyRixpQkFBaUIsZ0JBQWdCLEVBQ3REc0IsRUFBaUJkLE1BQU1zQixLQUFLVCxDQUFTLEVBRTNDQyxFQUFlUyxLQUFLLFNBQUNDLEVBQUdDLEdBRXZCLE9BQ0M5RSxXQUFXNkUsRUFBRVQsU0FBUyxHQUFHbEYsV0FBVyxFQUNwQ2MsV0FBVzhFLEVBQUVWLFNBQVMsR0FBR2xGLFdBQVcsQ0FFdEMsQ0FBQyxFQUVEaUYsRUFBZXJCLFFBQVEsU0FBQ0MsR0FFdkJaLFNBQVM0QyxZQUFZaEMsQ0FBSSxDQUMxQixDQUFDLENBQ0YsRUFHTXVCLGFBQWUsV0FDcEI5RyxTQUFTdUcsaUJBQWlCLFFBQVMsV0FDZixDQUFBLElBQWYxRixZQUF5QyxLQUFqQkcsZUFDM0J3RyxXQUFXLEVBQ1hqRCxhQUFhLEVBQ2J6QixXQUFXLEVBRWIsQ0FBQyxFQUV3QnBELFNBQVMyRixpQkFBaUIsZ0JBQWdCLEVBRWxEQyxRQUFRLFNBQUNDLEdBQ3pCQSxFQUFLZ0IsaUJBQWlCLFFBQVNmLFVBQVUsQ0FDMUMsQ0FBQyxFQUVEdkYsWUFBWXNHLGlCQUFpQixRQUFTbkMsaUJBQWlCLENBQ3hELEVBRUFILGdCQUFnQixFQUNoQkMsY0FBYyxFQUNkQyxZQUFZLEVBQ1oyQyxhQUFhIiwiZmlsZSI6Im1vZGVzL2NyYXNoLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNyYXNoQm94PSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNyYXNoX19ib3hcIik7XHJcbmNvbnN0IGNyYXNoVG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jcmFzaF9fdG9wXCIpO1xyXG5jb25zdCBjcmFzaEJvdHRvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3Jhc2hfX2JvdHRvbVwiKTtcclxuY29uc3QgY3Jhc2hCZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3Jhc2hfX2JnXCIpO1xyXG5jb25zdCBtdWx0aXBsaWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtdWx0aVwiKTtcclxuY29uc3Qgc3RhcnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N0YXJ0XCIpO1xyXG5jb25zdCB3aXRoZHJhd0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjd2l0aGRyYXdcIik7XHJcbmNvbnN0IGFtb3VudE9mV2luID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhbW91bnRcIik7XHJcbmNvbnN0IG5hbWVPZkl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNyYXNoX19pdGVtLW5hbWVcIik7XHJcbmNvbnN0IGNvbG9yT2ZJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jcmFzaF9faXRlbS1jb2xvclwiKTtcclxuY29uc3QgaXRlbXNCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2l0ZW1zLWJveFwiKTtcclxuY29uc3QgdXNlckl0ZW1zUGFnZVByZXZpb3VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcIi51cGdyYWRlcl9fbGlzdC1idG4tLWxlZnRcIlxyXG4pO1xyXG5jb25zdCB1c2VySXRlbXNQYWdlTmV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudXBncmFkZXJfX2xpc3QtYnRuLS1yaWdodFwiKTtcclxuY29uc3QgY3VycmVudFBhZ2VUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwYWdlLWN1cnJlbnRcIik7XHJcbmNvbnN0IHRvdGFsUGFnZVRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BhZ2UtdG90YWxcIik7XHJcbmNvbnN0IG5vSXRlbXNUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ub2l0ZW1zLXRleHRcIik7XHJcbmxldCBjdXJyZW50UGFnZSA9IDE7IC8vIGN1cnJlbnQgcGFnZSBvZiB1c2VyIGl0ZW1zXHJcbmNvbnN0IGl0ZW1zUGVyUGFnZSA9IDE0OyAvLyBtYXggaXRlbXMgcGVyIHBhZ2VcclxuXHJcbmxldCBzdGFydGluZ1ByaWNlO1xyXG5sZXQgY3VycmVudEl0ZW07XHJcbmxldCBuZXh0SXRlbTtcclxubGV0IG11bHRpcGxpZXJBbW91bnQgPSAxLjA7IC8vIFBvY3rEhXRrb3d5IG1ub8W8bmlrXHJcbmxldCBpc0l0ZW1DaGFuZ2luZyA9IGZhbHNlOyAvLyBHdWFyZCBmbGFnIHRvIHByZXZlbnQgbXVsdGlwbGUgdHJpZ2dlcnNcclxubGV0IGNyYXNoR29pbmcgPSBmYWxzZTtcclxubGV0IGNob29zZWRJdGVtID0gZmFsc2U7XHJcbmxldCBkaWRXaXRoZHJhdyA9IGZhbHNlO1xyXG5sZXQgcGlja2VkSXRlbUlkID0gXCJcIjtcclxuXHJcbi8vIEZ1bmtjamEgZG9kYWrEhWNhIG9icmF6eSBwcnplZG1pb3TDs3cgZG8gVUlcclxuY29uc3QgYWRkQ3JlYXRlQmV0ID0gKCkgPT4ge1xyXG4gICAgY3Jhc2hUb3AuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIGNyYXNoQm90dG9tLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICBjcmFzaEJveC5jbGFzc0xpc3QudmFsdWUgPSBcIlwiO1xyXG4gICAgY3Jhc2hCb3guY2xhc3NMaXN0LmFkZChcImNyYXNoX19ib3hcIik7XHJcblxyXG4gICAgY29uc3QgaW1nVG9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgIGNvbnN0IGltZ0JvdHRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICBpbWdUb3AuY2xhc3NMaXN0LmFkZChcImNyYXNoX19pbWdcIiwgXCJjcmFzaF9faW1nLS1tYWluXCIpO1xyXG4gICAgaW1nQm90dG9tLmNsYXNzTGlzdC5hZGQoXCJjcmFzaF9faW1nXCIsIFwiY3Jhc2hfX2ltZy0tbmV4dFwiLCBcImFkZC1uZXh0LWl0ZW1cIik7XHJcblxyXG4gICAgY3Jhc2hCb3guY2xhc3NMaXN0LmFkZChpdGVtc1tgaWQke2N1cnJlbnRJdGVtfWBdLmNvbG9yICsgXCItY3Jhc2gtYm94XCIpO1xyXG5cclxuICAgIGNvbG9yT2ZJdGVtLmNsYXNzTGlzdC52YWx1ZSA9IFwiXCI7XHJcbiAgICBuYW1lT2ZJdGVtLnRleHRDb250ZW50ID0gaXRlbXNbYGlkJHtjdXJyZW50SXRlbX1gXS5uYW1lO1xyXG4gICAgY29sb3JPZkl0ZW0uY2xhc3NMaXN0LmFkZChcclxuICAgICAgICBpdGVtc1tgaWQke2N1cnJlbnRJdGVtfWBdLmNvbG9yICsgXCItY3Jhc2hcIixcclxuICAgICAgICBcImNyYXNoX19pdGVtLWNvbG9yXCJcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgY3VycmVudEl0ZW1QcmljZSA9IGl0ZW1zW2BpZCR7Y3VycmVudEl0ZW19YF0ucHJpY2U7XHJcblxyXG4gICAgLy8gRmluZCB0aGUgbmV4dCBpdGVtIHRoYXQgaXMgbW9yZSBleHBlbnNpdmVcclxuICAgIG5leHRJdGVtID0gdW5kZWZpbmVkOyAvLyBSZXNldCBuZXh0SXRlbSB0byBhdm9pZCBpc3N1ZXMgd2l0aCBwcmV2aW91cyB2YWx1ZXNcclxuICAgIGZvciAoaSA9IDA7IGkgPCBjb3VudEl0ZW1zQW1vdW50MTsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHNvcnRlZEl0ZW1zW2BpZCR7aX1gXS5wcmljZSA+IGN1cnJlbnRJdGVtUHJpY2UpIHtcclxuICAgICAgICAgICAgbmV4dEl0ZW0gPSBzb3J0ZWRJdGVtc1tgaWQke2l9YF0uaWQ7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBTZXQgdGhlIGltYWdlIGZvciB0aGUgY3VycmVudCBpdGVtXHJcbiAgICBpbWdUb3Auc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLlwiICsgaXRlbXNbYGlkJHtjdXJyZW50SXRlbX1gXS5pbWdEaXN0KTtcclxuICAgIGltZ1RvcC5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgaXRlbXNbYGlkJHtjdXJyZW50SXRlbX1gXS5uYW1lKTtcclxuICAgIGNyYXNoVG9wLmFwcGVuZChpbWdUb3ApO1xyXG5cclxuICAgIC8vIE9ubHkgc2V0IHRoZSBuZXh0IGl0ZW0gaW1hZ2UgaWYgdGhlcmUgaXMgYSBuZXh0IGl0ZW1cclxuICAgIGlmIChuZXh0SXRlbSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgaW1nQm90dG9tLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcIi5cIiArIGl0ZW1zW2BpZCR7bmV4dEl0ZW19YF0uaW1nRGlzdCk7XHJcbiAgICAgICAgaW1nQm90dG9tLnNldEF0dHJpYnV0ZShcImFsdFwiLCBpdGVtc1tgaWQke25leHRJdGVtfWBdLm5hbWUpO1xyXG4gICAgICAgIGNyYXNoQm90dG9tLmFwcGVuZChpbWdCb3R0b20pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyBuZXh0IGl0ZW0sIGVuc3VyZSB0aGUgY3Jhc2hCb3R0b20gaXMgZW1wdHlcclxuICAgICAgICBjcmFzaEJvdHRvbS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgfVxyXG59O1xyXG5cclxuXHJcbi8vIEZ1bmtjamEgdXN0YXdpYWrEhWNhIG1ub8W8bmlrIGkgc3ByYXdkemFqxIVjYSB3YXJ1bmtpXHJcbmNvbnN0IHNldE11bHRpcGxpZXIgPSAoKSA9PiB7XHJcbiAgICBtdWx0aXBsaWVyLnRleHRDb250ZW50ID0gcGFyc2VGbG9hdChtdWx0aXBsaWVyQW1vdW50KS50b0ZpeGVkKDIpO1xyXG5cclxuICAgIGNvbnN0IG11bHRpcGxpZWRQcmljZSA9IHBhcnNlRmxvYXQoXHJcbiAgICAgICAgKHN0YXJ0aW5nUHJpY2UgKiBtdWx0aXBsaWVyQW1vdW50KS50b0ZpeGVkKDIpXHJcbiAgICApO1xyXG5cclxuICAgIGlmICghZGlkV2l0aGRyYXcpIHtcclxuICAgICAgICAvLyBPbmx5IGF0dGVtcHQgdG8gY2hhbmdlIGl0ZW1zIGlmIHRoZXJlIGlzIGEgbmV4dCBpdGVtXHJcbiAgICAgICAgaWYgKG5leHRJdGVtICE9PSB1bmRlZmluZWQgJiYgbXVsdGlwbGllZFByaWNlID4gaXRlbXNbYGlkJHtuZXh0SXRlbX1gXS5wcmljZSAmJiAhaXNJdGVtQ2hhbmdpbmcpIHtcclxuICAgICAgICAgICAgaXNJdGVtQ2hhbmdpbmcgPSB0cnVlOyAvLyBTZXQgZmxhZyB0byBwcmV2ZW50IG11bHRpcGxlIHRyaWdnZXJzXHJcbiAgICAgICAgICAgIGN1cnJlbnRJdGVtID0gbmV4dEl0ZW07IC8vIFVwZGF0ZSB0aGUgY3VycmVudCBpdGVtIHRvIHRoZSBuZXh0IG9uZVxyXG4gICAgICAgICAgICBjdXJyZW50UHJpY2UgPSBpdGVtc1tgaWQke2N1cnJlbnRJdGVtfWBdLnByaWNlOyAvLyBVcGRhdGUgdGhlIGN1cnJlbnQgcHJpY2UgdG8gdGhlIG5ldyBpdGVtXHJcblxyXG4gICAgICAgICAgICBjb25zdCBpbWdUb3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNyYXNoX19pbWctLW1haW5cIik7XHJcbiAgICAgICAgICAgIGNvbnN0IGltZ05leHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNyYXNoX19pbWctLW5leHRcIik7XHJcblxyXG4gICAgICAgICAgICBpbWdOZXh0LmNsYXNzTGlzdC5yZW1vdmUoXCJhZGQtbmV4dC1pdGVtXCIpO1xyXG4gICAgICAgICAgICBpbWdUb3AuY2xhc3NMaXN0LmFkZChcImhpZGUtbWFpbi1pdGVtXCIpO1xyXG4gICAgICAgICAgICBpbWdOZXh0LmNsYXNzTGlzdC5hZGQoXCJzaG93LW5leHQtaXRlbVwiKTtcclxuXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYWRkQ3JlYXRlQmV0KCk7XHJcbiAgICAgICAgICAgICAgICBpc0l0ZW1DaGFuZ2luZyA9IGZhbHNlOyAvLyBSZXNldCBmbGFnIGFmdGVyIFVJIHVwZGF0ZVxyXG4gICAgICAgICAgICB9LCAyNTApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcblxyXG5jb25zdCBzdGFydENyYXNoID0gKCkgPT4ge1xyXG5cdGFtb3VudE9mV2luLnRleHRDb250ZW50ID0gKHN0YXJ0aW5nUHJpY2UgKiBtdWx0aXBsaWVyQW1vdW50KS50b0ZpeGVkKDIpO1xyXG5cdGNyYXNoR29pbmcgPSB0cnVlO1xyXG5cdG11bHRpcGxpZXJBbW91bnQgPSAxLjA7IC8vIFJlc2V0IG11bHRpcGxpZXIgdG8gaW5pdGlhbCB2YWx1ZVxyXG5cdGFkZENyZWF0ZUJldCgpO1xyXG5cclxuXHRsZXQgaW50ZXJ2YWxUaW1lID0gMjAwOyAvLyBTdGFydCBpbnRlcnZhbCB0aW1lICgyMDBtcyBmb3Igc2xvd2VyIHN0YXJ0KVxyXG5cdGNvbnN0IG1heFNwZWVkID0gNTA7IC8vIE1pbmltdW0gaW50ZXJ2YWwgKG1heGltdW0gc3BlZWQpXHJcblxyXG5cdC8vIEZ1bmtjamEgZ2VuZXJ1asSFY2EgbG9zb3d5IG1ub8W8bmlrIGNyYXNoYVxyXG5cdGNvbnN0IGdlbmVyYXRlUmFuZG9tQ3Jhc2hNdWx0aXBsaWVyID0gKCkgPT4ge1xyXG5cdFx0Y29uc3QgbGFtYmRhID0gMC44OyAvLyBabWllbmlvbnkgcGFyYW1ldHIsIG5pxbxzemUgd2FydG/Fm2NpIGRsYSByemFkc3p5Y2ggd3nFvHN6eWNoIHd5bmlrw7N3XHJcblx0XHRsZXQgcmFuZG9tTXVsdGlwbGllciA9IE1hdGgucG93KE1hdGgucmFuZG9tKCksIC0xIC8gbGFtYmRhKTtcclxuXHRcdHJldHVybiBNYXRoLm1heCgxLjAxLCByYW5kb21NdWx0aXBsaWVyKTtcclxuXHR9O1xyXG5cclxuXHQvLyBHZW5lcnVqZW15IGxvc293eSBtbm/FvG5payBjcmFzaGEgcHJ6eSByb3pwb2N6xJljaXVcclxuXHRjb25zdCBjcmFzaEF0TXVsdGlwbGllciA9IGdlbmVyYXRlUmFuZG9tQ3Jhc2hNdWx0aXBsaWVyKCk7XHJcblxyXG5cdGNvbnN0IGluY3JlYXNlTXVsdGlwbGllciA9ICgpID0+IHtcclxuXHRcdG11bHRpcGxpZXJBbW91bnQgKz0gMC4wMTsgLy8gSW5jcmVhc2UgbXVsdGlwbGllclxyXG5cdFx0YW1vdW50T2ZXaW4udGV4dENvbnRlbnQgPSAoc3RhcnRpbmdQcmljZSAqIG11bHRpcGxpZXJBbW91bnQpLnRvRml4ZWQoMik7XHJcblx0XHRzZXRNdWx0aXBsaWVyKCk7XHJcblxyXG5cdFx0aWYgKG11bHRpcGxpZXJBbW91bnQgPj0gY3Jhc2hBdE11bHRpcGxpZXIpIHtcclxuXHRcdFx0Ly8gQ3Jhc2ggbmFzdMSZcHVqZSwgZ2R5IG9zacSFZ25pZW15IGxvc293eSBtbm/FvG5pa1xyXG5cdFx0XHRjbGVhckludGVydmFsKGNyYXNoSW50ZXJ2YWwpO1xyXG5cdFx0XHRlbmRHYW1lKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBDbGVhciB0aGUgb2xkIGludGVydmFsIGFuZCBzdGFydCBhIG5ldywgc2xpZ2h0bHkgZmFzdGVyIG9uZVxyXG5cdFx0XHRjbGVhckludGVydmFsKGNyYXNoSW50ZXJ2YWwpO1xyXG5cclxuXHRcdFx0Ly8gUmVkdWNlIGludGVydmFsIG1vcmUgZ2VudGx5IGFuZCBub3QgdG9vIHF1aWNrbHksIGVuc3VyaW5nIHNtb290aCBhY2NlbGVyYXRpb25cclxuXHRcdFx0aW50ZXJ2YWxUaW1lID0gTWF0aC5tYXgobWF4U3BlZWQsIDIwMCAvIE1hdGguc3FydChtdWx0aXBsaWVyQW1vdW50KSk7XHJcblxyXG5cdFx0XHRjcmFzaEludGVydmFsID0gc2V0SW50ZXJ2YWwoaW5jcmVhc2VNdWx0aXBsaWVyLCBpbnRlcnZhbFRpbWUpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIFN0YXJ0IHRoZSBmaXJzdCBpbnRlcnZhbFxyXG5cdGxldCBjcmFzaEludGVydmFsID0gc2V0SW50ZXJ2YWwoaW5jcmVhc2VNdWx0aXBsaWVyLCBpbnRlcnZhbFRpbWUpO1xyXG59O1xyXG5cclxuY29uc3QgZW5kR2FtZSA9ICgpID0+IHtcclxuXHRjcmFzaEJnLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcblx0d2l0aGRyYXdCdG4uY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuXHRzdGFydEJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG5cdGNvbG9yT2ZJdGVtLmNsYXNzTGlzdC52YWx1ZSA9IFwiXCI7XHJcblx0bmFtZU9mSXRlbS50ZXh0Q29udGVudCA9IFwiXCI7XHJcblx0Y3Jhc2hCZy50ZXh0Q29udGVudCA9XHJcblx0XHRcIkNyYXNoZWQgYXQ6IFwiICsgcGFyc2VGbG9hdChtdWx0aXBsaWVyQW1vdW50KS50b0ZpeGVkKDIpICsgXCJ4XCI7XHJcblx0Y3Jhc2hHb2luZyA9IGZhbHNlO1xyXG5cdGNob29zZWRJdGVtID0gZmFsc2U7XHJcbn07XHJcblxyXG5jb25zdCByZXNldENyYXNoID0gKCkgPT4ge1xyXG5cdGNyYXNoQmcuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuXHR3aXRoZHJhd0J0bi5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG5cdHN0YXJ0QnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcblx0ZGlkV2l0aGRyYXcgPSBmYWxzZTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGFkZFBsYXllckJldCgpIHtcclxuXHR3aXRoZHJhd0J0bi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG5cdHN0YXJ0QnRuLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcblx0Y3VycmVudEl0ZW0gPSBpdGVtc1tgaWQke3BpY2tlZEl0ZW1JZH1gXS5pZDtcclxuXHRzdGFydGluZ1ByaWNlID0gaXRlbXNbYGlkJHtjdXJyZW50SXRlbX1gXS5wcmljZTtcclxuXHJcblx0Y29uc3QgbmV3SXRlbUFtb3VudCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBpZCR7cGlja2VkSXRlbUlkfWApIC0gMTtcclxuXHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgaWQke3BpY2tlZEl0ZW1JZH1gLCBwYXJzZUludChuZXdJdGVtQW1vdW50KSk7XHJcblxyXG5cdHBpY2tlZEl0ZW1JZCA9IFwiXCI7XHJcblx0aXRlbXNCb3guaW5uZXJIVE1MID0gXCJcIjtcclxuXHRhZGRBbGxVc2VySXRlbXMoKTtcclxuXHRzZXRJdGVtc09yZGVyKCk7XHJcblx0cmVuZGVySXRlbXMoKTtcclxufVxyXG5cclxuY29uc3Qgd2l0aGRyYXdGcm9tQ3Jhc2ggPSAoKSA9PiB7XHJcbiAgICBkaWRXaXRoZHJhdyA9IHRydWU7XHJcbiAgICB3aXRoZHJhd0J0bi5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG5cclxuICAgIGlmIChjcmFzaEJvdHRvbS5maXJzdEVsZW1lbnRDaGlsZCkge1xyXG4gICAgICAgIGNyYXNoQm90dG9tLmZpcnN0RWxlbWVudENoaWxkLnJlbW92ZSgpOyAvLyBSZW1vdmUgb25seSBpZiBleGlzdHNcclxuICAgIH1cclxuXHJcbiAgICBpZiAoXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oYGlkJHtjdXJyZW50SXRlbX1gKSA9PT0gbnVsbCB8fFxyXG4gICAgICAgIGlzTmFOKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBpZCR7Y3VycmVudEl0ZW19YCkpXHJcbiAgICApIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgaWQke2N1cnJlbnRJdGVtfWAsIDEpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBpdGVtVG9BZGQgPSBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgaWQke2N1cnJlbnRJdGVtfWApKSArIDE7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGlkJHtjdXJyZW50SXRlbX1gLCBpdGVtVG9BZGQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG1vbmV5VG9BZGQgPVxyXG4gICAgICAgIHN0YXJ0aW5nUHJpY2UgKiBtdWx0aXBsaWVyQW1vdW50IC1cclxuICAgICAgICBpdGVtc1tgaWQke2N1cnJlbnRJdGVtfWBdLnByaWNlICtcclxuICAgICAgICBwYXJzZUZsb2F0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiQmFsYW5jZVwiKSk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkJhbGFuY2VcIiwgcGFyc2VGbG9hdChtb25leVRvQWRkKS50b0ZpeGVkKDIpICsgXCIkXCIpO1xyXG5cclxuICAgIGNvbnN0IGNyYXNoVG9BZGQgPSBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImNyYXNoV29uXCIpKSArIDE7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImNyYXNoV29uXCIsIGNyYXNoVG9BZGQpO1xyXG5cclxuICAgIGl0ZW1zQm94LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICBhZGRBbGxVc2VySXRlbXMoKTtcclxuICAgIHNldEl0ZW1zT3JkZXIoKTtcclxuICAgIHJlbmRlckl0ZW1zKCk7XHJcbiAgICBzZXRCYWxhbmNlKCk7XHJcbn07XHJcblxyXG5cclxuY29uc3QgYWRkQWxsVXNlckl0ZW1zID0gKCkgPT4ge1xyXG5cdC8vIGZ1bmN0aW9uIHRoYXQgYWRkcyBhbGwgcGxheWVyIGl0ZW1zXHJcblx0Zm9yIChpID0gMDsgaSA8IGNvdW50SXRlbXNBbW91bnQxOyBpKyspIHtcclxuXHRcdC8vIGxvb3BpbmcgdGhpcyBmb3IgZXZlcnkgaXRlbSBpbiBkYXRhIGJhc2VcclxuXHRcdGNvbnN0IGl0ZW1Db3VudCA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBpZCR7aX1gKSkgfHwgMDsgLy8gaWYgcGxheWVyIGhhdmUgdGhhdCBpdGVtIHNhdmUgaXRzIHZhbHVlIChhbW91bnQgb2YgaXRlbXMpXHJcblx0XHRmb3IgKGogPSAwOyBqIDwgaXRlbUNvdW50OyBqKyspIHtcclxuXHRcdFx0Ly8gY3JlYXRlIGl0ZW1zIGJhc2VkIG9uIGhvdyBtYW55IHBsYXllciBkb2VzIGhhdmVcclxuXHRcdFx0Y29uc3QgaXRlbUJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7IC8vIGl0ZW0gZWxlbWVudHNcclxuXHRcdFx0Y29uc3QgaXRlbUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcblx0XHRcdGNvbnN0IGl0ZW1OYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcblx0XHRcdGNvbnN0IGl0ZW1Ta2luID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcblx0XHRcdGNvbnN0IGl0ZW1QcmljZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG5cclxuXHRcdFx0aXRlbUJveC5jbGFzc0xpc3QuYWRkKFwicHJvZmlsZV9faXRlbVwiLCBcImNhbi1ob3ZlclwiKTsgLy8gaXRlbSBjbGFzc2VzXHJcblx0XHRcdGl0ZW1Cb3guY2xhc3NMaXN0LmFkZChpdGVtc1tgaWQke2l9YF0uY29sb3IgKyBcIi1kcm9wMlwiKTtcclxuXHRcdFx0aXRlbUltZy5jbGFzc0xpc3QuYWRkKFwicHJvZmlsZV9faXRlbS1pbWdcIik7XHJcblx0XHRcdGl0ZW1OYW1lLmNsYXNzTGlzdC5hZGQoXCJwcm9maWxlX19pdGVtLW5hbWVcIik7XHJcblx0XHRcdGl0ZW1Ta2luLmNsYXNzTGlzdC5hZGQoXCJwcm9maWxlX19pdGVtLXNraW5cIik7XHJcblx0XHRcdGl0ZW1Ta2luLmNsYXNzTGlzdC5hZGQoaXRlbXNbYGlkJHtpfWBdLmNvbG9yICsgXCItdGV4dFwiKTtcclxuXHRcdFx0aXRlbVByaWNlLmNsYXNzTGlzdC5hZGQoXCJwcm9maWxlX19pdGVtLXByaWNlXCIpO1xyXG5cclxuXHRcdFx0aXRlbUJveC5pZCA9IGl0ZW1zW2BpZCR7aX1gXS5pZDsgLy8gaXRlbSBhdHRyaWJ1dGVzLCB0ZXh0Q29udGVudHNcclxuXHRcdFx0aXRlbUltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIuXCIgKyBpdGVtc1tgaWQke2l9YF0uaW1nRGlzdCk7XHJcblx0XHRcdGl0ZW1JbWcuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGl0ZW1zW2BpZCR7aX1gXS5uYW1lKTtcclxuXHRcdFx0aXRlbU5hbWUudGV4dENvbnRlbnQgPSBpdGVtc1tgaWQke2l9YF0ud2VhcG9uO1xyXG5cdFx0XHRpdGVtU2tpbi50ZXh0Q29udGVudCA9IGl0ZW1zW2BpZCR7aX1gXS5za2luO1xyXG5cdFx0XHRpdGVtUHJpY2UudGV4dENvbnRlbnQgPSBpdGVtc1tgaWQke2l9YF0ucHJpY2UgKyBcIiRcIjtcclxuXHJcblx0XHRcdGl0ZW1Cb3guYXBwZW5kKGl0ZW1JbWcsIGl0ZW1OYW1lLCBpdGVtU2tpbiwgaXRlbVByaWNlKTsgLy8gYXBwZW5kIGV2ZXJ5dGhpbmcgdG8gaXRlbVxyXG5cdFx0XHRpdGVtc0JveC5hcHBlbmQoaXRlbUJveCk7IC8vIGFwZWVuZCBpdGVtIHRvIGl0ZW1zIGNvbnRhaW5lclxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Y29uc3QgYWxsSXRlbXNPZlBsYXllciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvZmlsZV9faXRlbVwiKTtcclxuXHRhbGxJdGVtc09mUGxheWVyLmZvckVhY2goKGl0ZW0pID0+IHtcclxuXHRcdGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNob29zZUl0ZW0pO1xyXG5cdH0pO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gY2hvb3NlSXRlbSgpIHtcclxuXHRpZiAoY2hvb3NlZEl0ZW0gPT09IGZhbHNlKSB7XHJcblx0XHR0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmUtaXRlbS1qYWNrcG90XCIpO1xyXG5cdFx0Y2hvb3NlZEl0ZW0gPSB0cnVlO1xyXG5cdFx0cGlja2VkSXRlbUlkID0gdGhpcy5pZDtcclxuXHR9IGVsc2UgaWYgKFxyXG5cdFx0Y2hvb3NlZEl0ZW0gPT09IHRydWUgJiZcclxuXHRcdHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlLWl0ZW0tamFja3BvdFwiKVxyXG5cdCkge1xyXG5cdFx0dGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlLWl0ZW0tamFja3BvdFwiKTtcclxuXHRcdGNob29zZWRJdGVtID0gZmFsc2U7XHJcblx0XHRwaWNrZWRJdGVtSWQgPSBcIlwiO1xyXG5cdH1cclxufVxyXG5cclxuY29uc3QgcmVuZGVySXRlbXMgPSAoKSA9PiB7XHJcblx0Ly8gc2V0IGl0ZW1zIG9uIHBhZ2VzXHJcblx0Y29uc3QgYWxsSXRlbXNPZlVzZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2ZpbGVfX2l0ZW1cIik7IC8vIGdldCBhbGwgaXRlbXMgb2YgdXNlclxyXG5cdGNvbnN0IGFsbEl0ZW1zT2ZVc2VyQXJyYXkgPSBBcnJheS5mcm9tKGFsbEl0ZW1zT2ZVc2VyKTsgLy8gbWFrZSBhcnJheSBmcm9tIGFsbCBpdGVtc1xyXG5cclxuXHRjb25zdCB1c2VyU3RhcnRJbmRleCA9IChjdXJyZW50UGFnZSAtIDEpICogaXRlbXNQZXJQYWdlOyAvLyBnZXQgaW5kZXggb2YgYXJyYXkgdG8gc3RhcnQgZnJvbSBiYXNlZCBvbiBjdXJyZW50IHBhZ2VcclxuXHRjb25zdCB1c2VyRW5kSW5kZXggPSB1c2VyU3RhcnRJbmRleCArIGl0ZW1zUGVyUGFnZTsgLy8gZ2V0IGVuZCBpbmRleCBvZiBhcnJheVxyXG5cclxuXHRhbGxJdGVtc09mVXNlckFycmF5LmZvckVhY2goKGl0ZW0pID0+IChpdGVtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIikpOyAvLyBoaWRlIGFsbCBpdGVtc1xyXG5cclxuXHRhbGxJdGVtc09mVXNlckFycmF5LnNsaWNlKHVzZXJTdGFydEluZGV4LCB1c2VyRW5kSW5kZXgpLmZvckVhY2goKGl0ZW0pID0+IHtcclxuXHRcdC8vIGZvciBpdGVtcyBmcm9tIHJhbmdlIG9mIGN1cnJlbnQgcGFnZSwgbWFrZSB0aGVtIHZpc2libGVcclxuXHRcdGl0ZW0uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG5cdH0pO1xyXG5cclxuXHRjb25zdCBhbGxVc2VySXRlbXNQYWdlcyA9IE1hdGguY2VpbChcclxuXHRcdGFsbEl0ZW1zT2ZVc2VyQXJyYXkubGVuZ3RoIC8gaXRlbXNQZXJQYWdlXHJcblx0KTsgLy8gZ2V0IHRvdGFsIGFtb3VudCBvZiBwYWdlc1xyXG5cclxuXHRjdXJyZW50UGFnZVRleHQudGV4dENvbnRlbnQgPSBjdXJyZW50UGFnZTtcclxuXHR0b3RhbFBhZ2VUZXh0LnRleHRDb250ZW50ID0gYWxsVXNlckl0ZW1zUGFnZXM7XHJcblxyXG5cdGlmIChhbGxVc2VySXRlbXNQYWdlcyA8IDEpIHtcclxuXHRcdGN1cnJlbnRQYWdlVGV4dC50ZXh0Q29udGVudCA9IDA7XHJcblx0XHRjdXJyZW50UGFnZVRleHQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG5cdFx0bm9JdGVtc1RleHQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Y3VycmVudFBhZ2VUZXh0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuXHRcdG5vSXRlbXNUZXh0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcblx0fVxyXG5cclxuXHRpZiAoY3VycmVudFBhZ2UgPT09IDEpIHtcclxuXHRcdHVzZXJJdGVtc1BhZ2VQcmV2aW91cy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7IC8vIGlmIGN1cnJlbnQgcGFnZSBpcyBwYWdlIG9uZSBoaWRlIHByZXZpb3VzIHBhZ2UgYnV0dG9uXHJcblx0fSBlbHNlIHtcclxuXHRcdHVzZXJJdGVtc1BhZ2VQcmV2aW91cy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiOyAvLyBpZiBpdHMgbm90IHBhZ2Ugb25lIHNob3cgaXRcclxuXHR9XHJcblxyXG5cdGlmIChjdXJyZW50UGFnZSA9PT0gYWxsVXNlckl0ZW1zUGFnZXMpIHtcclxuXHRcdHVzZXJJdGVtc1BhZ2VOZXh0LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjsgLy8gaWYgY3VycmVudCBwYWdlIGlzIGxhc3QgcGFnZSBoaWRlIG5leHQgcGFnZSBidXR0b25cclxuXHR9IGVsc2UgaWYgKGFsbEl0ZW1zT2ZVc2VyQXJyYXkubGVuZ3RoID4gMCkge1xyXG5cdFx0dXNlckl0ZW1zUGFnZU5leHQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjsgLy8gaWYgd2UgaGF2ZSBhdCBsZWFzdCBvbmUgcGFnZSBzaG93IG5leHQgcGFnZSBidXR0b25cclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBjaGFuZ2VQYWdlID0gKGRpcmVjdGlvbikgPT4ge1xyXG5cdC8vIGZ1bmN0aW9uIHRvIGNoYW5nZSBwYWdlXHJcblx0Y29uc3QgYWxsSXRlbXNPZlVzZXJDb3VudCA9XHJcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2ZpbGVfX2l0ZW1cIikubGVuZ3RoOyAvLyBnZXQgYW1vdW50IG9mIHVzZXIgaXRlbXNcclxuXHRjb25zdCB0b3RhbFVzZXJQYWdlcyA9IE1hdGguY2VpbChhbGxJdGVtc09mVXNlckNvdW50IC8gaXRlbXNQZXJQYWdlKTsgLy8gZ2V0IHRvdGFsIHBhZ2VzXHJcblxyXG5cdGlmIChkaXJlY3Rpb24gPT09IC0xICYmIGN1cnJlbnRQYWdlID4gMSkge1xyXG5cdFx0Ly8gY2hhbmdlIHBhZ2UgYmFzZWQgb24gYnV0dG9uIGNsaWNrZWRcclxuXHRcdGN1cnJlbnRQYWdlLS07XHJcblx0fSBlbHNlIGlmIChkaXJlY3Rpb24gPT09IDEgJiYgY3VycmVudFBhZ2UgPCB0b3RhbFVzZXJQYWdlcykge1xyXG5cdFx0Y3VycmVudFBhZ2UrKztcclxuXHR9XHJcblxyXG5cdHJlbmRlckl0ZW1zKCk7XHJcbn07XHJcblxyXG5jb25zdCBzZXRJdGVtc09yZGVyID0gKCkgPT4ge1xyXG5cdC8vIGZ1bmN0aW9uIHRvIHNldCBpdGVtcyBvcmRlclxyXG5cdGNvbnN0IHVzZXJJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvZmlsZV9faXRlbVwiKTsgLy8gdGFrZSBhbGwgcGxheWVyIGl0ZW1zXHJcblx0Y29uc3QgdXNlckl0ZW1zQXJyYXkgPSBBcnJheS5mcm9tKHVzZXJJdGVtcyk7IC8vIGRvIGFycmF5IGZyb20gaXRcclxuXHJcblx0dXNlckl0ZW1zQXJyYXkuc29ydCgoYSwgYikgPT4ge1xyXG5cdFx0Ly8gc29ydCBpdGVtcyBmcm9tIGNoZWFwZXN0IHRvIG1vc3QgZXhwZW5zaXZlXHJcblx0XHRyZXR1cm4gKFxyXG5cdFx0XHRwYXJzZUZsb2F0KGEuY2hpbGRyZW5bM10udGV4dENvbnRlbnQpIC1cclxuXHRcdFx0cGFyc2VGbG9hdChiLmNoaWxkcmVuWzNdLnRleHRDb250ZW50KVxyXG5cdFx0KTtcclxuXHR9KTtcclxuXHJcblx0dXNlckl0ZW1zQXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG5cdFx0Ly8gYXBwZW5kIHNvcnRlZCBpdGVtc1xyXG5cdFx0aXRlbXNCb3guYXBwZW5kQ2hpbGQoaXRlbSk7XHJcblx0fSk7XHJcbn07XHJcblxyXG4vLyBEb2RhbmllIG5hc8WCdWNoaXdhY3p5IHpkYXJ6ZcWEXHJcbmNvbnN0IGFkZExpc3RlbmVycyA9ICgpID0+IHtcclxuXHRzdGFydEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0aWYgKGNyYXNoR29pbmcgPT09IGZhbHNlICYmIHBpY2tlZEl0ZW1JZCAhPT0gXCJcIikge1xyXG5cdFx0XHRyZXNldENyYXNoKCk7XHJcblx0XHRcdGFkZFBsYXllckJldCgpO1xyXG5cdFx0XHRzdGFydENyYXNoKCk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdGNvbnN0IGFsbEl0ZW1zT2ZQbGF5ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2ZpbGVfX2l0ZW1cIik7XHJcblxyXG5cdGFsbEl0ZW1zT2ZQbGF5ZXIuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG5cdFx0aXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2hvb3NlSXRlbSk7XHJcblx0fSk7XHJcblxyXG5cdHdpdGhkcmF3QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB3aXRoZHJhd0Zyb21DcmFzaCk7XHJcbn07XHJcblxyXG5hZGRBbGxVc2VySXRlbXMoKTtcclxuc2V0SXRlbXNPcmRlcigpO1xyXG5yZW5kZXJJdGVtcygpO1xyXG5hZGRMaXN0ZW5lcnMoKTtcclxuIl19
